// server.js

// BASE SETUP
// =============================================================================

// call the packages we need
var express    = require('express');        // call express
var app        = express();                 // define our app using express
var bodyParser = require('body-parser');
var cors = require('cors');

// configure app to use bodyParser()
// this will let us get the data from a POST
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());
app.use(cors());

var port = process.env.PORT || 3009;        // set our port

// ROUTES FOR OUR API
// =============================================================================
var router = express.Router();              // get an instance of the express Router

router.get('/series/trending', function(req, res) {
    res.json(seriesTrending);
});

router.get('/series/top', function(req, res) {
    res.json(seriesTop);
});

// Curently airing and recommended
// api/series/spotlight
router.get('/series/spotlight', function(req, res) {
    res.json(seriesSpotlight);
});

router.get('/auth/check', function(req, res){
    res.json(authCheck);
});

// Series Detail
router.get('/series/mr_robot', function(req, res) {
    res.json(mrRobotDetails);
});

router.get('/series/episodesbyseason/289590/1', function(req, res) {
    res.json(mrRobotS01);
});

router.get('/series/episodesbyseason/289590/2', function(req, res) {
    res.json(mrRobotS02);
});

router.get('/series/episodesbyseason/289590/3', function(req, res) {
    res.json(mrRobotS03);
});

// more routes for our API will happen here

// REGISTER OUR ROUTES -------------------------------
// all of our routes will be prefixed with /api
app.use('/api', router);

// START THE SERVER
// =============================================================================
app.listen(port);
console.log('Magic happens on port ' + port);

var seriesTrending = [{"id":"156422","unique_name":"mr_robot","name":"Mr. Robot","description":"The show follows Elliot, who is a cyber-security tech by day and vigilante hacker by night. He has used his hacking skills for justice and to protect those he cares about, but has problems connecting to people in the real world due to social anxiety. He strongly believes that the world is being ruled by the 1% of the 1% and, that using money and debt, they have enslaved mankind and he wishes desperately to change this. He is recruited by the head of a highly secret hacking group to take down the corporation he is being paid to protect with the hope of erasing 70% of all the debt in the world. He has had delusions in the past and sees a therapist who tries to help him and takes medication for it, but in the end he is unsure what is real and what is not, and so are we as we experience everything from his perspective.","firstaired":"2015-06-24","rating":"9.1","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt4158110","poster_image":"mr_robot.jpg","poster_image_converted":true,"fanart_image":"mr_robot.jpg","fanart_image_converted":true,"banner_image":"mr_robot.jpg","banner_image_converted":true,"category":"|Crime|Drama|Thriller|","status":"Continuing","popular":false,"trend":"834","season_amount":"3","episode_amount":"22","has_specials":true,"specials_amount":"2","created_at":"2016-07-01 14:37:33","updated_at":"2016-07-01 14:37:33","series_id":"289590","user_id":"7878","sort":"1","archive":"0","last_notified":null,"following":0},{"id":"156266","unique_name":"game_of_thrones","name":"Game of Thrones","description":"Seven noble families fight for control of the mythical land of Westeros. Friction between the houses leads to full-scale war. All while a very ancient evil awakens in the farthest north. Amidst the war, a neglected military order of misfits, the Night's Watch, is all that stands between the realms of men and the icy horrors beyond.","firstaired":"2011-04-17","rating":"9.5","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt0944947","poster_image":"game_of_thrones.jpg","poster_image_converted":true,"fanart_image":"game_of_thrones.jpg","fanart_image_converted":true,"banner_image":"game_of_thrones.jpg","banner_image_converted":true,"category":"|Adventure|Drama|Fantasy|","status":"Continuing","popular":false,"trend":"3044","season_amount":"7","episode_amount":"60","has_specials":true,"specials_amount":"21","created_at":"2016-06-29 20:52:19","updated_at":"2016-06-29 20:52:19","series_id":"121361","user_id":"7877","sort":"1","archive":"0","last_notified":null,"following":0},{"id":"156447","unique_name":"the_night_of_(2016)_1","name":"The Night Of","description":"Explore the dark corners of NYC's criminal-justice system as they swirl around a young Pakistani-American man who is accused of murder in this riveting eight-part miniseries. Starring John Turturro as an embattled defense attorney and Riz Ahmed as his client, the story centers on the killing and the investigation that targets the unassuming college kid as its prime suspect.","firstaired":"2016-07-10","rating":"9.3","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt2401256","poster_image":"the_night_of_(2016)_1.jpg","poster_image_converted":true,"fanart_image":"the_night_of_(2016)_1.jpg","fanart_image_converted":true,"banner_image":"the_night_of_(2016)_1.jpg","banner_image_converted":true,"category":"|Drama|Mini-Series|","status":"Continuing","popular":false,"trend":"19","season_amount":"2","episode_amount":"8","has_specials":true,"specials_amount":"1","created_at":"2016-07-02 00:04:45","updated_at":"2016-07-02 00:04:45","series_id":"310516","user_id":"4597","sort":"1","archive":"0","last_notified":null,"following":0}];
var seriesTop = [{"id":"257655","unique_name":"arrow","name":"Arrow","description":"Oliver Queen and his father are lost at sea when their luxury yacht sinks. His father doesn't survive. Oliver survives on an uncharted island for five years learning to fight, but also learning about his father's corruption and unscrupulous business dealings. He returns to civilization a changed man, determined to put things right. He disguises himself with the hood of one of his mysterious island mentors, arms himself with a bow and sets about hunting down the men and women who have corrupted his city.","firstaired":"2012-10-10","rating":"8.2","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt2193021","poster_image":"arrow.jpg","poster_image_converted":true,"fanart_image":"arrow.jpg","fanart_image_converted":true,"banner_image":"arrow.jpg","banner_image_converted":true,"category":"|Action|Adventure|Drama|","status":"Continuing","popular":false,"trend":"1409","season_amount":"6","episode_amount":"93","has_specials":true,"specials_amount":"7","created_at":"2015-03-19 06:27:05","updated_at":"2016-07-13 20:20:37","series_id":"257655","count":"1409","following":1},{"id":"248742","unique_name":"person_of_interest","name":"Person of Interest","description":"John Reese, a presumed dead former CIA agent who is approached by a mysterious billionaire named Harold Finch to prevent violent crimes before they happen by using an advanced surveillance system dubbed \"The Machine\". Their unique brand of vigilante justice attracts the attention of two NYPD officers, Joss Carter and Lionel Fusco, whom Reese uses to his advantage as he investigates persons of interest. Reese and Finch are later aided by Samantha \"Root\" Groves , a highly intelligent computer hacker and contract killer who the Machine later identifies as its \"analog interface\" and Sameen Shaw, a former ISA assassin who unknowingly dealt with the \"relevant\" numbers found by the Machine.","firstaired":"2011-09-22","rating":"9.0","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt1839578","poster_image":"person_of_interest.jpg","poster_image_converted":true,"fanart_image":"person_of_interest.jpg","fanart_image_converted":true,"banner_image":"person_of_interest.jpg","banner_image_converted":true,"category":"|Action|Adventure|Drama|Mystery|Thriller|","status":"Ended","popular":false,"trend":"665","season_amount":"5","episode_amount":"104","has_specials":false,"specials_amount":"0","created_at":"2015-03-19 05:13:19","updated_at":"2016-07-14 09:51:09","series_id":"248742","count":"665","following":1},{"id":"264492","unique_name":"under_the_dome","name":"Under the Dome","description":"An invisible and mysterious force field descends upon a small fictional town in the United States, trapping residents inside, cut off from the rest of civilization. The trapped townsfolk must discover the secrets and purpose of the \"dome\" and its origins, while coming to learn more than they ever knew about each other.","firstaired":"2013-06-24","rating":"7.8","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt1553656","poster_image":"under_the_dome.jpg","poster_image_converted":true,"fanart_image":"under_the_dome.jpg","fanart_image_converted":true,"banner_image":"under_the_dome.jpg","banner_image_converted":true,"category":"|Drama|Horror|Mystery|Science-Fiction|","status":"Ended","popular":false,"trend":"542","season_amount":"4","episode_amount":"39","has_specials":true,"specials_amount":"1","created_at":"2015-03-09 22:56:27","updated_at":"2016-07-13 18:38:45","series_id":"264492","count":"542","following":1},{"id":"71663","unique_name":"the_simpsons","name":"The Simpsons","description":"Set in Springfield, the average American town, the show focuses on the antics and everyday adventures of the Simpson family; Homer, Marge, Bart, Lisa and Maggie, as well as a virtual cast of thousands. Since the beginning, the series has been a pop culture icon, attracting hundreds of celebrities to guest star. The show has also made name for itself in its fearless satirical take on politics, media and American life in general.","firstaired":"1989-12-17","rating":"8.9","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt0096697","poster_image":"the_simpsons.jpg","poster_image_converted":true,"fanart_image":"the_simpsons.jpg","fanart_image_converted":true,"banner_image":"the_simpsons.jpg","banner_image_converted":true,"category":"|Animation|Comedy|Family|","status":"Continuing","popular":false,"trend":"521","season_amount":"29","episode_amount":"597","has_specials":true,"specials_amount":"61","created_at":"2015-03-19 05:01:01","updated_at":"2016-07-14 11:00:59","series_id":"71663","count":"521","following":1},{"id":"277165","unique_name":"silicon_valley_(2014)","name":"Silicon Valley","description":"In the high-tech gold rush of modern Silicon Valley, the people most qualified to succeed are the least capable of handling success. A comedy partially inspired by Mike Judge's own experiences as a Silicon Valley engineer in the late 1980s.","firstaired":"2014-04-06","rating":"8.7","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt2575988","poster_image":"silicon_valley_(2014).jpg","poster_image_converted":true,"fanart_image":"silicon_valley_(2014).jpg","fanart_image_converted":true,"banner_image":"silicon_valley_(2014).jpg","banner_image_converted":true,"category":"|Comedy|","status":"Continuing","popular":false,"trend":"480","season_amount":"4","episode_amount":"28","has_specials":true,"specials_amount":"1","created_at":"2015-03-24 05:00:10","updated_at":"2016-07-14 00:12:54","series_id":"277165","count":"480","following":1}];
var authCheck = {"id":"2","accountname":"Arno Bats","thirdparty":true};

var seriesSpotlight = [{"id":"156422","unique_name":"mr_robot","name":"Mr. Robot","description":"The show follows Elliot, who is a cyber-security tech by day and vigilante hacker by night. He has used his hacking skills for justice and to protect those he cares about, but has problems connecting to people in the real world due to social anxiety. He strongly believes that the world is being ruled by the 1% of the 1% and, that using money and debt, they have enslaved mankind and he wishes desperately to change this. He is recruited by the head of a highly secret hacking group to take down the corporation he is being paid to protect with the hope of erasing 70% of all the debt in the world. He has had delusions in the past and sees a therapist who tries to help him and takes medication for it, but in the end he is unsure what is real and what is not, and so are we as we experience everything from his perspective.","firstaired":"2015-06-24","rating":"9.1","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt4158110","poster_image":"mr_robot.jpg","poster_image_converted":true,"fanart_image":"mr_robot.jpg","fanart_image_converted":true,"banner_image":"mr_robot.jpg","banner_image_converted":true,"category":"|Crime|Drama|Thriller|","status":"Continuing","popular":false,"trend":"834","season_amount":"3","episode_amount":"22","has_specials":true,"specials_amount":"2","created_at":"2016-07-01 14:37:33","updated_at":"2016-07-01 14:37:33","series_id":"289590","user_id":"7878","sort":"1","archive":"0","last_notified":null,"following":0},{"id":"172811","unique_name":"stranger_things","name":"Stranger Things","description":"When a young boy disappears, his mother, his friends, and the local sheriff must confront terrifying forces in order to find him. ","firstaired":"2016-07-15","rating":"9.0","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt4574334","poster_image":"stranger_things.jpg","poster_image_converted":true,"fanart_image":"stranger_things.jpg","fanart_image_converted":true,"banner_image":"","banner_image_converted":true,"category":"|Drama|Horror|Mystery|Science-Fiction|Suspense|","status":"Continuing","popular":false,"trend":"530","season_amount":"2","episode_amount":"17","has_specials":false,"specials_amount":"0","created_at":"2016-10-31 18:46:45","updated_at":"2016-10-31 18:46:45","series_id":"305288","user_id":"633","sort":"1","archive":"0","last_notified":null,"following":0}];

//Series
var mrRobotDetails = {"id":"289590","unique_name":"mr_robot","name":"Mr. Robot","description":"Elliot is a cyber-security tech by day and vigilante hacker by night. He has used his hacking skills for justice and to protect those he cares about, but has problems connecting to people in the real world due to social anxiety. He strongly believes that the world is being ruled by the 1% of the 1% and, that using money and debt, they have enslaved mankind and he wishes desperately to change this. He is recruited by the head of a highly secret hacking group to take down the corporation he is being paid to protect with the hope of erasing 70% of all the debt in the world. He has had delusions in the past and sees a therapist who tries to help him and takes medication for it, but in the end he is unsure what is real and what is not, and so are we as we experience everything from his perspective.","firstaired":"2015-06-24","rating":"9.1","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt4158110","poster_image":"mr_robot.jpg","poster_image_converted":true,"fanart_image":"mr_robot.jpg","fanart_image_converted":true,"banner_image":"mr_robot.jpg","banner_image_converted":true,"category":"|Crime|Drama|Thriller|","status":"Continuing","popular":false,"trend":"987","season_amount":"3","episode_amount":"22","has_specials":true,"specials_amount":"3","created_at":"2015-03-19 05:59:55","updated_at":"2016-09-19 03:13:18","last_seen_season":1,"following":0};
var mrRobotS01 = [{"id":"5077068","series_id":"289590","season":"1","episode":"1","airdate":"24-06-2015","name":"eps1.0_hellofriend.mov","description":"Elliot, a cyber-security engineer by day and vigilante hacker by night, is recruited by a mysterious underground group to destroy the firm he's paid to protect. Elliot must decide how far he'll go to expose the forces he believes are running (and ruining) the world.","image":"none","created_at":"-0001-11-30 00:00:00","updated_at":"2016-11-14 23:10:14","aired":"1","seen":0},{"id":"5240604","series_id":"289590","season":"1","episode":"2","airdate":"01-07-2015","name":"eps1.1_ones-and-zer0es.mpeg","description":"Elliot is torn between accepting a job offer from Evil Corp and joining the fsociety hacker group. At the same time Elliot needs to make decision that could harm people around him.","image":"none","created_at":"2015-05-31 22:50:05","updated_at":"2016-11-14 23:10:15","aired":"1","seen":0},{"id":"5240605","series_id":"289590","season":"1","episode":"3","airdate":"08-07-2015","name":"eps1.2_d3bug.mkv","description":"Elliot tries to lead a normal life, but can't escape fsociety. Gideon, meanwhile, grows suspicious, and Tyrell plays dirty.","image":"none","created_at":"2015-05-31 22:50:05","updated_at":"2016-11-14 23:10:16","aired":"1","seen":0},{"id":"5240606","series_id":"289590","season":"1","episode":"4","airdate":"15-07-2015","name":"eps1.3_da3m0ns.mp4","description":"Elliot's inner-demons threaten an fsociety operation.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:16","aired":"1","seen":0},{"id":"5240607","series_id":"289590","season":"1","episode":"5","airdate":"22-07-2015","name":"eps1.4_3xpl0its.wmv","description":"Fsociety attempts to penetrate Steel Mountain, the most secure data facility in America.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:17","aired":"1","seen":0},{"id":"5240610","series_id":"289590","season":"1","episode":"6","airdate":"29-07-2015","name":"eps1.5_br4ve-trave1er.asf","description":"Elliot attempts to hack Vera out of jail in order to save someone he cares about. Meanwhile, Tyrell's \"game\" gets crazy and Angela digs deeper into her mother's death.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:17","aired":"1","seen":0},{"id":"5240613","series_id":"289590","season":"1","episode":"7","airdate":"05-08-2015","name":"eps1.6_v1ew-s0urce.flv","description":"Elliott goes missing, Mr. Robot tries to pull fsociety back together and Angela goes head-to-head with an old nemesis.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:18","aired":"1","seen":0},{"id":"5240615","series_id":"289590","season":"1","episode":"8","airdate":"12-08-2015","name":"eps1.7_wh1ter0se.m4v","description":"Allsafe is controlled, the Dark Army is ready to meet Elliot & Tyrell and Joanna's plan goes into effect.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:18","aired":"1","seen":0},{"id":"5240616","series_id":"289590","season":"1","episode":"9","airdate":"19-08-2015","name":"eps1.8_m1rr0r1ng.qt","description":"The Evil Corp hack is threatened by a mystery man from Elliot's past.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:18","aired":"1","seen":0},{"id":"5240617","series_id":"289590","season":"1","episode":"10","airdate":"02-09-2015","name":"eps1.9_zer0-day.avi","description":"Mr. Robot and Tyrell are MIA and a past hack haunts Elliot.","image":"none","created_at":"2015-05-31 23:40:25","updated_at":"2016-11-14 23:10:19","aired":"1","seen":0}];
var mrRobotS02 = [{"id":"5588492","series_id":"289590","season":"2","episode":"1","airdate":"13-07-2016","name":"eps2.0_unm4sk-pt1.tc","description":"One month later and omfg, five\/nine has changed the world; Elliot is in seclusion; Angela finds happiness at Evil Corp.; fsociety delivers a malicious payload; TANGO DOWN?","image":"none","created_at":"2016-04-20 20:10:25","updated_at":"2016-11-14 23:10:19","aired":"1","seen":0},{"id":"5656559","series_id":"289590","season":"2","episode":"2","airdate":"13-07-2016","name":"eps2.0_unm4sk-pt2.tc","description":"Elliot is in seclusion, Angela finds happiness at Evil Corp., and fsociety delivers a malicious payload.","image":"none","created_at":"2016-06-23 19:20:46","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5648919","series_id":"289590","season":"2","episode":"3","airdate":"20-07-2016","name":"eps2.1_k3rnel-pan1c.ksd","description":"Elliot vows to beat Mr. Robot, but the task proves difficult. Angela gets a view behind the scenes at Evil Corp. Sh*t hits fan with fsociety.","image":"none","created_at":"2016-06-16 17:00:12","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5648920","series_id":"289590","season":"2","episode":"4","airdate":"27-07-2016","name":"eps2.2_init_1.asec","description":"Elliot befriends Ray, hoping he can finally delete Mr. Robot; Dom makes a big discovery; Darlene considers whether the FBI or Dark Army are the bigger threat.","image":"none","created_at":"2016-06-16 17:00:12","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5669633","series_id":"289590","season":"2","episode":"5","airdate":"03-08-2016","name":"eps2.3_logic-b0mb.hc","description":"Elliot is unable to quit the game; Dom and the FBI travel to China to investigate five\/nine; Joanna is haunted; Darlene asks Angela for help.","image":"none","created_at":"2016-07-06 22:20:25","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5669634","series_id":"289590","season":"2","episode":"6","airdate":"10-08-2016","name":"eps2.4_m4ster-s1ave.aes","description":"Mr. Robot tries to prove to Elliot that he can be useful; Darlene and Angela's plan does not go as expected.","image":"none","created_at":"2016-07-06 22:20:25","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5669636","series_id":"289590","season":"2","episode":"7","airdate":"17-08-2016","name":"eps2.5_h4ndshake.sme","description":"Mr. Robot and Elliot try to get along; fsociety releases a holiday video to honor Uncle Sam; Darlene acts on an old desire.","image":"none","created_at":"2016-07-06 22:20:25","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5669639","series_id":"289590","season":"2","episode":"8","airdate":"24-08-2016","name":"eps2.6_succ3ss0r.p12","description":"The latest fsociety leak has Dom trying her best to spin the case in the FBI's favor; Angela defends her career choices; Darlene makes it known that her circle of trust is shrinking.","image":"none","created_at":"2016-07-06 22:20:25","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5669642","series_id":"289590","season":"2","episode":"9","airdate":"31-08-2016","name":"eps2.7_init_5.fve","description":"Angela wants more from Evil Corp.; Dark Army's allegiance is in question; Elliot and Darlene seek answers.","image":"none","created_at":"2016-07-06 22:20:25","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5669646","series_id":"289590","season":"2","episode":"10","airdate":"07-09-2016","name":"eps2.8_h1dden-pr0cess.axx","description":"Elliot wonders if Mr. Robot has been lying to him; Darlene attempts to do the right thing; Dom and the FBI get closer.","image":"none","created_at":"2016-07-06 22:20:25","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5670309","series_id":"289590","season":"2","episode":"11","airdate":"14-09-2016","name":"eps2.9_pyth0n-pt1.p7z","description":"Angela makes an acquaintance; Darlene realizes she is in too deep; an old friend reveals everything to Elliot.","image":"none","created_at":"2016-07-08 10:50:11","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0},{"id":"5670310","series_id":"289590","season":"2","episode":"12","airdate":"21-09-2016","name":"eps2.9_pyth0n-pt2.p7z","description":"Darlene realizes she is in too deep; an old friend reveals everything to Elliot","image":"none","created_at":"2016-07-08 10:50:11","updated_at":"2016-11-14 23:10:20","aired":"1","seen":0}]
var mrRobotS03 = [{"id":"5770424","series_id":"289590","season":"3","episode":"1","airdate":null,"name":"TBA","description":"","image":"none","created_at":"2016-09-28 17:10:09","updated_at":"2016-09-28 17:10:09","aired":"0","seen":0}]

var strangerThingsDetails = {"id":"305288","unique_name":"stranger_things","name":"Stranger Things","description":"When a young boy disappears, his mother, his friends, and the local sheriff must confront terrifying forces in order to find him. ","firstaired":"2016-07-15","rating":"9.0","rating_updated":"0000-00-00 00:00:00","imdb_id":"tt4574334","poster_image":"stranger_things.jpg","poster_image_converted":true,"fanart_image":"stranger_things.jpg","fanart_image_converted":true,"banner_image":"","banner_image_converted":true,"category":"|Drama|Horror|Mystery|Science-Fiction|Suspense|","status":"Continuing","popular":false,"trend":"530","season_amount":"2","episode_amount":"17","has_specials":false,"specials_amount":"0","created_at":"2016-01-03 01:00:06","updated_at":"2016-11-15 01:27:38","last_seen_season":"1","following":1};